<!DOCTYPE html>
<!--[if IE 7]>
<html id="ie7" lang="en-AU">
<![endif]-->
<!--[if (gt IE 7) | (!IE)]><!-->
<html lang="en-AU">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<title>What | Jual</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://localhost/jual/xmlrpc.php" />
<link rel="alternate" type="application/rss+xml" title="Jual &raquo; Feed" href="../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Jual &raquo; Comments Feed" href="../comments/feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"http:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/localhost\/jual\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.2"}};
			!function(a,b,c){function d(a){var c=b.createElement("canvas"),d=c.getContext&&c.getContext("2d");return d&&d.fillText?(d.textBaseline="top",d.font="600 32px Arial","flag"===a?(d.fillText(String.fromCharCode(55356,56812,55356,56807),0,0),c.toDataURL().length>3e3):(d.fillText(String.fromCharCode(55357,56835),0,0),0!==d.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f;c.supports={simple:d("simple"),flag:d("flag")},c.supports.simple&&c.supports.flag||(f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='vscf_style-css'  href='../../wp-content/plugins/very-simple-contact-form/vscf_style.css@ver=4.2.css' type='text/css' media='all' />
<link rel='stylesheet' id='pilcrow-css'  href='../../wp-content/themes/pilcrow/style.css@ver=4.2.css' type='text/css' media='all' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../xmlrpc.php@rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.2" />
<link rel='canonical' href='index.html' />
<link rel='shortlink' href='index.html' />
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
</head>

<body class="page page-id-50 page-template-default no-sidebar color-light">
<div id="container" class="hfeed">
	<div id="page" class="blog">
		<div id="header">
						<div id="site-title">
				<span>
					<a href="../../index.html" title="Jual" rel="home">Jual</a>
				</span>
			</div>

			<div id="nav" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="index.html#content" title="Skip to content">Skip to content</a></div>
								<div class="menu"><ul><li ><a href="../../index.html">Home</a></li><li class="page_item page-item-6"><a href="../why/index.html">Why</a></li><li class="page_item page-item-50 current_page_item"><a href="index.html">What</a></li><li class="page_item page-item-63"><a href="../where/index.html">Where</a></li><li class="page_item page-item-9"><a href="../faq/index.html">FAQ</a></li><li class="page_item page-item-17"><a href="../contact/index.html">Contact</a></li></ul></div>
			</div><!-- #nav -->

			<div id="pic">
				<a href="../../index.html" rel="home">
								</a>
			</div><!-- #pic -->
		</div><!-- #header -->

		<div id="content-box">

<div id="content-container">
	<div id="content" role="main">

	
<div id="post-50" class="post-50 page type-page status-publish hentry">
	
	<div class="entry entry-content">
		<p><strong>What does JualScript look like?</strong></p>
<p>It looks exactly like JavaScript code.  Here is the content of one of the test files that will run on both the Jual VM and a JavaScript interpreter:</p>
<pre>var szOut = "*";
var x = 0;
var y;
while (x &lt; 10) {
    y = 0;
    while (y &lt; 50) {
        szOut = (szOut + " " + y);
        if (y  == 20) { break; };
        y = y + 1;
    };
    szOut = (szOut + "\n");
    x = x + 1;
    
    if (x == 6) { break; };
};
print (szOut);</pre>
<p><strong>What are some of the differences in the syntax between JavaScript and JualScript?</strong></p>
<p>In JualScript:</p>
<p>* Curly braces are required, even for single line code.<br />
(Some consider this a good thing.  No more dangling if .. else problems!)<br />
* You can not initialize multiple variables with a single var statement on the same line.  It is possible with Lua style syntax, but this is not recommended for compatibility. i.e.</p>
<pre>var j=1, k=2;     // Works in JavaScript but not JualScript (AVOID)
var j,k = 1,2;    // Works in JualScript but not JavaScript (AVOID)
var j=1; var k=2; // Recommended way works in both</pre>
<p>* Array initialization with key/value pairs is not supported:</p>
<pre>// Works in JavaScript but not JualScript (AVOID)
var MyArray = {"a" : "Athens" , "b" : "Belgrade", "c" : "Cairo"};

// Works in JualScript but not JavaScript (AVOID)
var MyArray = { ["a"]="Athens", ["b"]="Belgrade", ["c"]="Cairo" };

// Use this instead - works in both languages
var MyArray = {};
MyArray.a = "Athens";
MyArray.b = "Belgrade";
MyArray.c = "Cario";

// This also works in both languages
MyArray["a"] = "Athens";</pre>
<p><strong>What are some of the other differences between JualScript and JavaScript?</strong></p>
<p>There are many.  In JualScript:<br />
* There is no special values like <strong>undefined</strong> and <strong>NaN</strong> &#8211; only <strong>null</strong>.<br />
* Only <strong>false</strong> and <strong>null</strong> evaluate to a <strong>false</strong> condition.  All other values evaluate to true including: the number zero 0, the empty string &#8220;&#8221;. Make explicit comparisons in your conditional statements.<br />
* Different error handling mechanism: pcall and xpcall vs try/catch/finally<br />
* Different ways of prototyping and defining object classes.<br />
(The one method of defining classes using closures can be used by both JualScript and JavaScript. See the example file <strong>15_classes.js</strong> in the testsuite folder)<br />
* String access/manipluation is via functions, not class methods. i.e.</p>
<pre>var MyString = "Hello world";
print (MyString.charAt(3));  // Does not work in JualScript
print (charAt(MyString,3));  // Use this instead</pre>
<p>A summary of the key language features and the base library functions is listed in the file <a href="https://github.com/sajonoso/jual/blob/master/jual_reference.txt"><span style="color: #000080;">jual_reference.txt</span></a>.</p>
<p><strong>What differences do I need to watch out for when converting JavaScript code to JualScript?</strong></p>
<p>* The most tricky thing to watch out for is string concatenation with the + operator. The difference in output is caused by automatic number coercion and conversion in the Lua VM. This simple loop will produce different results under JualScript and JavaScript:</p>
<pre>var iList = "0";
for (i=1; i&lt;10; i=i+1) {
    iList = iList + " " + i;
};
print(iList);</pre>
<p>Javascript will produce the output:</p>
<pre>0 1 2 3 4 5 6 7 8 9</pre>
<p>while JualScript will simply output the number 45. To fix this behaviour will require a change in the VM code. No change has been done to maintain byte compatibility with the Lua VM.  The simple solution to this is to use the concat function rather than the ambiguous + operator. Alternatively, start the loop with a value that can not be coerced into a number e.g. replacing the initial variable declaration to var iList=&#8221;*&#8221;; will produce the same results in both languages.</p>
<p><strong>What features from Lua will work in JualScript?</strong></p>
<p>Every feature not modifed to make Lua act like JavaScript should work in JualScript.  Here are some that may be useful:</p>
<p>* String formating using sprintf format. Use the built-in Lua string.format() function.<br />
* Goto statements:  see example file <strong><a href="https://github.com/sajonoso/jual/blob/master/samples/test_gotostat.js">test_gotostat.js</a></strong> in the samples folder<br />
* Co-routines:  see example file <strong><a href="https://github.com/sajonoso/jual/blob/master/samples/test_coroutines.js">test_coroutines.js</a></strong> in samples folder</p>
	</div><!-- .entry-content -->

	</div><!-- #post-## -->


<div id="comments">

	
	
	
</div><!-- #comments -->

	</div><!-- #content -->
</div><!-- #container -->


		</div><!-- #content-box -->

		<div id="footer" role="contentinfo">
			<div id="colophon">

				
				<div id="site-info">
					<a href="../../index.html" title="Jual" rel="home">Jual</a> &middot; An embeddable JavaScript like engine				</div><!-- #site-info -->

				<!--div id="site-generator">
					<a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a>
					&middot;
					Theme: Pilcrow by <a href="http://automattic.com/" rel="designer">Automattic</a>.				</div --><!-- #site-generator -->

			</div><!-- #colophon -->
		</div><!-- #footer -->
	</div><!-- #page .blog -->
</div><!-- #container -->

</body>
</html>
